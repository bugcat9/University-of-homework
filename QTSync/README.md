# 哈希树实现文件同步

* 环境QT5
* 其中“打包”文件夹是打包好的可运行文件，QTSync为源码，哈希树为帮助材料



## 1.需求规格说明

每天我们都会持续生产电子资料，如文档更新、资料下载、拍照录像等。因此，需要对

资料进行智能化的备份与保存。文件同步软件是一类针对电脑各种文件同步的软件，可以在

指定的两个文件夹之间进行单向或双向的同步，同时也能满足用户实现硬盘之间、硬盘与移

动存储设备之间的备份与同步。需要注意的是：备份≠同步。备份就是把资料一股脑儿拷贝

或上传，有很大的局限性，资料包越来越大，每次拷贝上传很耗时间，因此也无法频繁备份。

而同步，只针对有变化的文件随时同步更新，速度快，每天至少可以同步一次。 

本题要求设计并实现一款磁盘文件同步软件。 

## 2.总体分析与设计

* 设计思想：

  * 储存结构：哈希树
  * 主要算法思想：根据两边文件，构建两个相应的哈希树，然后通过哈希树比对等算法，得出两边文件的差异然后进行操作

* ### 设计表示：

  * 主要类Synchronous，控制着同步的操作，主要数据成员有哈希树oht、ohts，文件不同的集合L。
  * Synchronous中的函数Compare_OHT、Add_Sub_OHT、Remove_Sub_OHT、Update_Sub_OHT用来
  * Synchronous函数Creat、Delete、Modify，对应的时文件的创造、删除、更新操作
  * 主窗口类主要负责显示，然后根据用户选择来操作类Synchronous实现对应的操作

  大致流程图：

  ![image-20200814102208701](/image/image-20200814102208701.png)

  

  

## 3.界面展示

  程序运行结果：

  <img src="/image/图1.png" alt="图1" style="zoom: 67%;" />

<img src="/image/图2-1597372489781.png" alt="图2" style="zoom: 67%;" />

开始：文件夹f1和f2

<img src="/image/图3.png" alt="图3" style="zoom:67%;" />

运行结果：

<img src="/image/图4.png" alt="图4" style="zoom:67%;" />

其中image放着一些图片，txt中放着文本，word中放着pdf和word

 

## 4.使用说明：

可以通过视图直接选择两个文件夹，然后按下同步就可以进行两个文件夹或者磁盘的同步，按下设置后可以跳转到设置界面进行相应的选择以实现对应的同步操作，比如双向同步，，程序默认是单向实时同步，再程序运行期间还可以换两个文件夹进行同步但是不能实现多个任务同时进行，每次只能对两个进行操作。

特别注意：需要同步后再进行设置，不然没有文件夹操作会死机